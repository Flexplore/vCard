<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#070c1b" />
  <title>Carte NFC ‚Ä¢ Florian Fournier (Flexplore)</title>

  <!-- cache-buster: incr√©mente v=2, v=3... quand tu modifies -->
  <link rel="stylesheet" href="styles.css?v=14" />

  <!-- Pr√©charge logo -->
  <link rel="preload" as="image" href="https://i.imgur.com/HWrE6VI.png" />

  <script>
    // Charge Spline seulement si √ßa a du sens (perf / data / reduce motion)
    (function () {
      const prefersReducedMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const saveData = !!(navigator.connection && navigator.connection.saveData);
      const slowNetwork = !!(navigator.connection && ["slow-2g", "2g"].includes(navigator.connection.effectiveType));

      const shouldEnableSpline = !(prefersReducedMotion || saveData || slowNetwork);

      // Expose un flag global pour main.js (fallback)
      window.__SPLINE_ENABLED__ = shouldEnableSpline;

      if (!shouldEnableSpline) return;

      const splineLib = "https://unpkg.com/@splinetool/viewer@1/build/spline-viewer.js";
      const sceneUrl = "https://prod.spline.design/HDyWmhB2pMKQXwE8/scene.splinecode?v=20251003-2";

      // Pr√©charge lib + sc√®ne
      const preloadLib = document.createElement("link");
      preloadLib.rel = "modulepreload";
      preloadLib.href = splineLib;
      preloadLib.crossOrigin = "anonymous";
      document.head.appendChild(preloadLib);

      const preloadScene = document.createElement("link");
      preloadScene.rel = "preload";
      preloadScene.as = "fetch";
      preloadScene.href = sceneUrl;
      preloadScene.crossOrigin = "anonymous";
      document.head.appendChild(preloadScene);

      // Charge la lib
      const script = document.createElement("script");
      script.type = "module";
      script.src = splineLib;
      script.dataset.splineLoader = "true";
      document.head.appendChild(script);

      // Tente un fetch "warm"
      fetch(sceneUrl, { mode: "cors" }).catch(() => {});
    })();
  </script>
</head>

<body>
  <main class="screen">
    <header class="top">
      <div class="brand" aria-label="Flexplore">
        <img class="logoImg" src="https://i.imgur.com/HWrE6VI.png" alt="Logo Flexplore" />
        <div class="brandName">Flexplore</div>
      </div>
    </header>

    <section class="hero">
      <div class="robotShell" aria-hidden="true">
        <div class="robotMask">
          <div class="robotStage" id="robotStage">
            <!-- Spline (si activ√©) -->
            <spline-viewer
              id="splineRobot"
              url="https://prod.spline.design/HDyWmhB2pMKQXwE8/scene.splinecode?v=20251003-2"
            ></spline-viewer>

            <!-- Fallback (si Spline d√©sactiv√© / pas charg√©) -->
            <div class="robotFallback" id="robotFallback"></div>
          </div>
        </div>

        <div class="ring"></div>
      </div>

      <div class="nameRow">
        <div class="avatar" id="avatar">
          <img id="avatarImg" alt="" />
        </div>
        <h1 class="name" id="displayName">Florian Fournier</h1>
        <a class="circleBtn compact" id="websiteLink" href="https://flexplore-ia.com" target="_blank" rel="noopener" aria-label="Ouvrir le site">
          <span aria-hidden="true">üåê</span>
        </a>
      </div>
      <p class="subtitle">Int√©grations IA et automatisation pour les PME</p>

      <div class="ctaRow">
        <!-- invers√©: Enregistrer contact devient bleu + texte plus gros -->
        <button class="btn primary big" id="btnVcf" type="button">
          <span class="btnIcon" aria-hidden="true">‚¨á</span>
          Enregistrer contact
        </button>

        <!-- invers√©: R√©server devient outline + texte plus petit -->
        <a class="btn outline small" id="btnCalendly" href="https://calendly.com/flexplore/30min?back=1&month=2025-11" target="_blank" rel="noopener">
          <span class="btnIcon" aria-hidden="true">üìÖ</span>
          R√©server ma consultation
        </a>
      </div>
    </section>

    <!-- bande sombre bas de page (√©vite le ‚Äúfooter bleu diff√©rent‚Äù) -->
    <div class="footPanel">
      <footer class="foot">¬© <span id="year"></span> Flexplore</footer>
    </div>
  </main>

  <!-- cache-buster: incr√©mente v=2, v=3... quand tu modifies -->
  <script src="main.js?v=13"></script>
</body>
</html>
